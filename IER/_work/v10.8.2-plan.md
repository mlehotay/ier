## What to keep vs change

### Keep

* `00-front-matter.md` as the *book front* (title, disclaimers, etc.).
* `01-theory.md`, `02-applications.md`, `03-meta.md` as **Part boundary sentinels** (they’re still the correct dividers).
* `IER-book.md` as the **rules/spec for what the book is** (TOC with full chapter titles, Part mapping, Preface note).
* `IER-publishing.md` as **rendering rules only**.

### Change

* Don’t introduce a hand-maintained `IER-book.v10.8.2.md` unless you *really* want to. Instead:

  * **generate a build input** (concatenation list or a single stitched markdown) *from the manifest/book spec*, and
  * add a **validation step** that fails the build on drift.

---

## Updated end-to-end plan (v10.8.2, aligned to your repo)

### Phase 1 — Lock and sanity-check the manifest

**Goal:** manifest is the membership source of truth.

Actions:

* Confirm `IER-manifest.md` v10.8.2 is committed.
* Confirm it clearly marks **Parts I–III as book-scope** and **Parts IV–V as non-book**.

Exit:

* You can unambiguously extract the list of book chapter filenames from Parts I–III.

---

### Phase 2 — Confirm `IER-book.md` is the structural spec (already mostly done)

**Goal:** `IER-book.md` is “rules + TOC”, not rendering instructions.

Actions (quick audit):

* Ensure it states:

  * exactly **three Parts**
  * **exhaustive over Manifest Parts I–III**
  * **Preface derives from `IER-paper/IER-paper.md`** and is non-authoritative
* Ensure full chapter titles are present (they are, in your current file).

Exit:

* `IER-book.md` is stable and not duplicating publishing/rendering constraints.

---

### Phase 3 — Make the build include the Preface and match the manifest

**Goal:** build input ordering is correct and deterministic.

#### A) Insert Preface into the build spine

In `IER-book/Makefile`, set `PARTS` to include the Preface *between* front matter and Part I divider:

```make
PARTS=00-front-matter.md \
      ../IER-paper/IER-paper.md \
      01-theory.md \
      02-applications.md \
      03-meta.md
```

(Adjust the relative path if your repo structure differs, but the *position* is the key.)

#### B) Stop relying on “implicit chapter inclusion”

Right now your `PARTS` list only names the Part dividers, not the actual chapter files. You need one of these:

* **Option 1 (recommended):** Generate `build/book-input.txt` (a newline-separated list of markdown files) from `IER-manifest.md` and/or `IER-book.md`, then pass it to pandoc.
* **Option 2:** Generate a single stitched `build/IER-book.v10.8.2.md` that concatenates in order, then pass that single file to pandoc.

Exit:

* Pandoc is fed *exactly* the ordered chapter list: front matter → preface → Part I divider → Part I chapters … etc.

---

### Phase 4 — Publishing rules remain subordinate (already good)

**Goal:** `IER-publishing.md` cannot redefine structure.

Actions (audit only):

* Ensure it contains the dependency ladder (canon → manifest → book → publishing).
* Ensure it states “three Parts, defined in `IER-book.md`”.
* Ensure checklist includes Preface + “no governance docs”.

Exit:

* Publishing doc is “how to render”, not “what the book is”.

---

### Phase 5 — Changelog alignment

**Goal:** record structural changes once, tersely.

Actions:

* Add a v10.8.2 entry to `IER-changelog.md` capturing:

  * Preface addition
  * three-Part structure reaffirmed
  * manifest/book/publishing alignment
  * build validation added (once done)

Exit:

* No forward-looking promises.

---

### Phase 6 — Build system hardening (the important part)

**Goal:** drift becomes impossible to ship.

Add a `validate` step that compares:

* **Expected chapters** = manifest Parts I–III filenames
* **Actual chapters** = the build input list you hand to pandoc

Fail if:

* any expected file missing
* any non-book file included (Parts IV–V, governance, publishing docs, etc.)

Minimal implementation pattern:

**Repo additions**

* `scripts/extract_book_list.py`

  * parses `IER-manifest.md` and writes `build/book-input.txt`
* `scripts/validate_book.py`

  * verifies `build/book-input.txt` matches manifest Parts I–III exactly

**Makefile flow**

```make
booklist: $(OUTDIR)
	python3 scripts/extract_book_list.py ../IER-manifest.md $(OUTDIR)/book-input.txt

validate: booklist
	python3 scripts/validate_book.py ../IER-manifest.md $(OUTDIR)/book-input.txt

epub: validate
	pandoc $$(cat $(OUTDIR)/book-input.txt) --toc --toc-depth=2 --resource-path=. -o $(OUTDIR)/IER-book.epub
```

Exit:

* `make` fails loudly if anything drifts.

---

### Phase 7 — Hygiene sweep

Search repo-wide for legacy terms (“division”, “two parts”, etc.) and update to “three Parts”.

Exit:

* no stale structure language.

---

## Bottom line answers to your original questions

* **Are the three divider files still appropriate?**
  Yes: they’re exactly the right “Part boundary sentinels” for enforcing the three-Part constraint.

* **How do we incorporate IER-paper?**
  Include `IER-paper/IER-paper.md` as **Preface** *between* `00-front-matter.md` and `01-theory.md`, and ensure validation treats it as *allowed non-chapter preface material* (i.e., it’s present, but not part of the manifest Parts I–III chapter set).

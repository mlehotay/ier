# To-Do List: Spec Features Not Yet Implemented

## A. `generate_deps.py` — Missing or Partial Features

### A1. Generator version reporting ❌

**Spec says**

> Generation Metadata must include *generator name and version*

**Current behavior**

* Generator name is included (`generate_deps.py`)
* ❌ No version string (semantic version, commit-derived version, etc.)

**To-do**

* Decide on a versioning scheme (e.g. hardcoded `__version__`, git tag, or date-based)
* Emit it in:

  * `build/dependencies.yml → meta`
  * `IER-prerequisites.md → Generation Metadata`

---

### A2. Manifest version or hash ❌

**Spec says**

> Generation Metadata must include manifest version or hash

**Current behavior**

* Manifest *path* is recorded
* ❌ No manifest hash, timestamp, or version

**To-do**

* Compute and emit one of:

  * SHA256 of manifest contents
  * Git blob hash (if repo-managed)
* Include in both outputs’ metadata

---

### A3. Deterministic build hash (optional but named) ❌

**Spec mentions**

> deterministic build hash (if available)

**Current behavior**

* Git commit hash is included
* ❌ No deterministic “build hash” (inputs-only hash)

**To-do**

* Optionally hash:

  * manifest contents
  * bundles.yml contents
  * normalized chapter metadata
* Emit as a distinct field from git hash

---

### A4. Gate “required by” index ❌ (explicitly unimplemented)

**Spec says**

> Gate Index must list:
>
> * chapters that open the gate
> * chapters that require the gate

**Current behavior**

* Gates **opened** are collected
* “Gates Required” is always emitted as `[]`
* No schema exists to declare gate requirements

**To-do (design-required)**

* Decide whether gate *requirements* exist conceptually
* If yes:

  * define YAML schema (e.g. `requires.gates`)
  * validate identifiers
  * populate reverse index
* If no:

  * consider explicitly freezing this as unimplemented in spec

---

### A5. Explicit warning taxonomy / classification ❌

**Spec implies**

> Warnings are meaningful audit signals

**Current behavior**

* Warnings are emitted as free-text strings
* ❌ No structured warning codes or categories

**To-do**

* Introduce warning IDs (e.g. `W001`, `W_YAML_MISSING`)
* Emit structured warnings in deps YAML
* Optionally group warnings in markdown output

---

## B. Validation Claims Removed from Code but Still Implicitly Referenced

> These were correctly *removed* from the updated spec narrative,
> but are worth tracking if they are intended future features.

### B1. Guardrail propagation rules ❌

**Not implemented**

* No propagation or transitive effects
* Guardrails are treated as flat lists only

**To-do (optional future)**

* Define propagation semantics
* Implement closure logic
* Add validation and audit output

---

### B2. Bridge semantics ❌

**Not implemented**

* No concept of bridge chapters
* No tier-crossing rules

**To-do (optional future)**

* Define bridge markers
* Enforce exposure rules
* Reflect in audit surface

---

### B3. Gate discipline enforcement ❌

**Not implemented**

* Gates are recorded but not enforced
* No “must open before use” logic

**To-do (optional future)**

* Define discipline rules
* Validate gate usage order
* Fail build on violations

---

## C. `verify_order.py` — Missing or Partial Features

### C1. Structural prerequisite ordering checks ❌ (explicitly ignored)

**Spec context**

* Structural prereqs are defined, but…

**Current behavior**

* Structural prerequisites are **ignored** for ordering
* This is intentional and documented

**To-do (only if desired)**

* Add optional mode:

  * `--enforce-structural-order`
* Or explicitly freeze as non-goal

---

### C2. Guardrail prerequisite ordering checks ❌

Same situation as structural prereqs.

**To-do**

* Same as above, only if future tightening is desired

---

### C3. Reporting of ignored virtual/filler nodes (machine-readable) ❌

**Current behavior**

* Prints a stderr note if virtual IDs are ignored
* ❌ Not recorded in any output artifact

**To-do**

* Optionally emit:

  * count of virtual nodes
  * list of ignored IDs
* Useful for CI diagnostics

---

## D. Cross-Cutting / Spec-Level Gaps

### D1. No explicit “strict determinism test” ❌

**Spec requires**

> output must be byte-for-byte identical

**Current behavior**

* Deterministic by construction
* ❌ No test or assertion enforcing this

**To-do**

* Add CI test that:

  * runs generator twice
  * diffs outputs
* Or add a `--check-determinism` mode

---

### D2. No formal schema for `build/dependencies.yml` ❌

**Spec implies**

> machine-readable dependency surface

**Current behavior**

* Structure is stable but implicit
* ❌ No JSON Schema / YAML schema

**To-do**

* Write a formal schema
* Validate generated YAML against it
* Useful for downstream tooling

---

### D3. No explicit compatibility contract between generator and verifier ❌

**Current state**

* Implicit coupling via chapter IDs and hard prereqs

**To-do**

* Document (or encode) invariants:

  * ID format
  * required fields
  * meaning of missing metadata
* Optional: version-gate verifier against deps schema version

---

# Summary Table

| Area       | Missing Feature               | Status          |
| ---------- | ----------------------------- | --------------- |
| Metadata   | Generator version             | ❌               |
| Metadata   | Manifest hash/version         | ❌               |
| Metadata   | Deterministic build hash      | ❌               |
| Gates      | Gate “required by”            | ❌               |
| Validation | Guardrail propagation         | ❌               |
| Validation | Bridge semantics              | ❌               |
| Validation | Gate discipline               | ❌               |
| Warnings   | Structured warning taxonomy   | ❌               |
| Ordering   | Structural prereq enforcement | ❌ (intentional) |
| Ordering   | Guardrail prereq enforcement  | ❌ (intentional) |
| Tooling    | Determinism enforcement test  | ❌               |
| Tooling    | Deps YAML formal schema       | ❌               |

---
